/*!
 * As-Select3 - Modern JavaScript Select Library
 * Version: 1.2.0
 * Author: Sunil Kumar
 * Repository: https://github.com/sunil4587/As-select3
 * License: MIT
 */
(e=>{class t{constructor(t,s={}){if(!e(t).length)throw new Error(`As-Select3: Element "${t}" not found`);this.$element=e(t),this.element=this.$element[0];let i=this.$element.closest(".as-select3-container");i.length||(i=e('<div class="as-select3-container"></div>'),this.$element.before(i),i.append(this.$element)),this.$container=i,this.isMultiple=void 0!==this.$element.attr("multiple"),this.options=e.extend({placeholder:this.isMultiple?"Select options...":"Choose an option...",searchable:!1!==this.$element.data("search"),selectAll:!1!==s.selectAll&&this.isMultiple,clearAll:!1!==s.clearAll,maxSelection:s.maxSelection||null,remote:s.remote||null,searchDelay:s.searchDelay||300,noResultsText:"No results found",loadingText:"Loading...",searchPlaceholder:"Search options...",selectAllText:"Select All",clearAllText:"Clear All",defaultIconClass:"as-select3-arrow-down",iconPrefix:s.iconPrefix||null,allowHtml:!1!==s.allowHtml,escapeMarkup:s.escapeMarkup||function(e){return e},templateResult:s.templateResult||null,templateSelection:s.templateSelection||null,matcher:s.matcher||null},s),this.isOpen=!1,this.focusIndex=-1,this.selectedValues=this.isMultiple?[]:this.$element.find("option:selected").val()||null,this.isLoading=!1,this.searchTimer=null,this.originalOptions=[],this.init()}init(){this.createUI(),this.bindEvents(),this.updateFromSelect(),this.storeOriginalOptions()}createUI(){this.$trigger=e('<div class="as-select3-trigger" tabindex="0" role="combobox" aria-expanded="false"></div>'),this.$selection=e('<div class="as-select3-selection"></div>'),this.$placeholder=e(`<span class="as-select3-placeholder">${this.options.placeholder}</span>`),this.$arrow=e(`<i class="${this.options.defaultIconClass} as-select3-arrow"></i>`),this.$selection.append(this.$placeholder),this.$trigger.append(this.$selection,this.$arrow),this.$container.append(this.$trigger),this.$element.addClass("d-none"),this.createDropdown()}createDropdown(){this.$dropdown=e('<div class="as-select3-dropdown" role="listbox"></div>'),this.options.searchable&&this.createSearch(),this.createOptionsContainer();var t=this.$element.find("option:not(:disabled)").length;((t=this.options.selectAll&&(!this.options.maxSelection||this.options.maxSelection>=t))||this.options.clearAll)&&this.createActions(t),this.$container.append(this.$dropdown)}createSearch(){var t=e('<div class="as-select3-search"><div class="position-relative w-100"></div></div>'),s=(this.$searchInput=e('<input type="text" class="form-control form-control-sm" role="searchbox">').attr("placeholder",this.options.searchPlaceholder),e(`<i class="${this.getCloseIcon()} as-select3-search-clear"></i>`));t.find("div").append(this.$searchInput,s),this.$dropdown.append(t)}createOptionsContainer(){this.$optionsContainer=e('<div class="as-select3-options"></div>'),this.$element.find("option").each(((e,t)=>{this.$optionsContainer.append(this.createOptionElement(t,e))})),this.$dropdown.append(this.$optionsContainer)}createOptionElement(t,s){t=t instanceof HTMLOptionElement?{value:t.value,text:t.text,selected:t.selected,icon:e(t).data("icon")||e(t).attr("data-icon"),html:e(t).data("html")||e(t).attr("data-html")||e(t).html(),disabled:t.disabled}:{value:t.value||t.val,text:t.text||t.label,selected:!!t.selected,icon:t.icon,html:t.html||t.text||t.label,disabled:!!t.disabled},s=e('<div class="as-select3-option" role="option" tabindex="-1"></div>').data({value:t.value,index:s,icon:t.icon,html:t.html,text:t.text}).attr("aria-selected",t.selected.toString());var i,a=e('<div class="as-select3-option-left"></div>');return this.options.templateResult&&"function"==typeof this.options.templateResult?(i=this.options.templateResult(t))&&a.html(i):this.options.allowHtml&&t.html&&t.html!==t.text?a.html(this.options.escapeMarkup(t.html)):(t.icon&&(i=e('<div class="as-select3-option-icon"></div>'),this.addIcon(i,t.icon,"16px"),a.append(i)),a.append(e('<span class="as-select3-option-text"></span>').text(t.text))),s.append(a),this.isMultiple&&s.append(e('<input type="checkbox" class="form-check-input">').prop("checked",t.selected)),t.selected&&s.addClass("selected"),t.disabled&&s.addClass("disabled").attr("aria-disabled","true"),s}addIcon(t,s,i="14px"){s&&(s.match(/^(https?:|data:|\.?\/)/)?t.append(e("<img>").attr({src:s,alt:""}).css({width:i,height:i,objectFit:"cover"})):this.isIconClass(s)?(i=e("<i></i>").addClass(s),t.append(i)):t.html(s))}isIconClass(e){return!(!e||"string"!=typeof e)&&(["bi-","fa-","fas-","far-","fab-","fal-","fad-","material-icons","icon-","glyphicon-","mdi-","feather-","lucide-","tabler-icon-","heroicon-","phosphor-","remix-"].some((t=>e.includes(t)))||e.match(/^(bi|fa|fas|far|fab|fal|fad|material-icons|icon|glyphicon|mdi|feather|lucide|tabler|heroicon|phosphor|remix)\s/)||this.options.iconPrefix&&e.startsWith(this.options.iconPrefix))}getCloseIcon(){return this.options.defaultIconClass.includes("fa")?"fas fa-times":this.options.defaultIconClass.includes("material")?"material-icons":this.options.defaultIconClass.includes("feather")?"feather feather-x":this.options.defaultIconClass.includes("lucide")?"lucide lucide-x":"as-select3-close"}getSearchIcon(){return this.options.defaultIconClass.includes("fa")?"fas fa-search":this.options.defaultIconClass.includes("material")?"material-icons":this.options.defaultIconClass.includes("feather")?"feather feather-search":this.options.defaultIconClass.includes("lucide")?"lucide lucide-search":"as-select3-search-icon"}createActions(t=this.options.selectAll){var s;this.isMultiple&&(s=e('<div class="as-select3-actions"></div>'),t&&s.append(e('<button type="button" class="btn btn-sm btn-outline-primary"></button>').text(this.options.selectAllText).on("click",(()=>this.selectAll()))),this.options.clearAll&&s.append(e('<button type="button" class="btn btn-sm btn-outline-secondary"></button>').text(this.options.clearAllText).on("click",(()=>this.clearAll()))),this.$dropdown.append(s))}bindEvents(){this.$trigger.on("click",(t=>{e(t.target).hasClass("as-select3-clear")||(t.preventDefault(),this.toggle())})),this.$container.on("click",".as-select3-clear",(e=>(e.stopPropagation(),e.preventDefault(),this.clearSingle(),!1))).on("click",".as-select3-tag-remove",(t=>(t.stopPropagation(),t.preventDefault(),(t=e(t.target).closest(".as-select3-tag").data("value"))&&this.removeTag(t),!1))).on("click",".as-select3-search-clear",(e=>(e.stopPropagation(),e.preventDefault(),this.$searchInput&&this.$searchInput.val("").trigger("input").focus(),!1))),this.$trigger.on("keydown",(e=>this.handleKeyDown(e))),this.$searchInput&&(this.$searchInput.on("input",(e=>{let t=e.target.value;this.options.remote?(this.searchTimer&&clearTimeout(this.searchTimer),this.searchTimer=setTimeout((()=>this.remoteSearch(t)),this.options.searchDelay)):this.search(t)})),this.$searchInput.on("keydown",(e=>{"Escape"===e.key&&this.close()}))),this.$optionsContainer.on("click",".as-select3-option",(t=>{if((t=e(t.currentTarget)).hasClass("disabled"))return!1;this.toggleOption(t)})),e(document).on("click.asSelect3",(e=>{this.$container.is(e.target)||this.$container.has(e.target).length||this.close()})),this.$element.on("invalid",(()=>this.$trigger.addClass("is-invalid"))).closest("form").on("reset.asSelect3",(()=>{setTimeout((()=>this.reset()),0)}))}handleKeyDown(e){var t;switch(e.key){case"Enter":case" ":e.preventDefault(),this.isOpen?(t=this.$optionsContainer.find(".focused")).length&&this.toggleOption(t):this.open();break;case"Escape":this.isOpen&&(e.preventDefault(),this.close());break;case"ArrowDown":e.preventDefault(),this.isOpen?this.focusNext():this.open();break;case"ArrowUp":e.preventDefault(),this.isOpen?this.focusPrevious():this.open();break;case"Tab":this.isOpen&&(e.preventDefault(),this.focusNext())}}focusNext(){var e=this.$optionsContainer.find(".as-select3-option:visible:not(.disabled)");e.length&&(this.$optionsContainer.find(".focused").removeClass("focused"),this.focusIndex=this.focusIndex<e.length-1?this.focusIndex+1:0,this.scrollToOption(e.eq(this.focusIndex).addClass("focused")))}focusPrevious(){var e=this.$optionsContainer.find(".as-select3-option:visible:not(.disabled)");e.length&&(this.$optionsContainer.find(".focused").removeClass("focused"),this.focusIndex=0<this.focusIndex?this.focusIndex-1:e.length-1,this.scrollToOption(e.eq(this.focusIndex).addClass("focused")))}scrollToOption(e){var t,s;e.length&&(t=this.$optionsContainer[0],e=(s=e[0].offsetTop)+e[0].offsetHeight,s<t.scrollTop?t.scrollTop=s:e>t.scrollTop+t.clientHeight&&(t.scrollTop=e-t.clientHeight))}toggle(){this.isOpen?this.close():this.open()}open(){this.isOpen||(this.isOpen=!0,this.$dropdown.addClass("show"),this.$trigger.addClass("active").attr("aria-expanded","true"),this.$searchInput&&this.$searchInput.focus(),this.$element.trigger("asSelect3:open"))}close(){this.isOpen&&(this.isOpen=!1,this.$dropdown.removeClass("show"),this.$trigger.removeClass("active").attr("aria-expanded","false"),this.$optionsContainer.find(".focused").removeClass("focused"),this.focusIndex=-1,this.$searchInput&&(this.$searchInput.val(""),this.search("")),this.$element.trigger("asSelect3:close"))}toggleOption(e){if(e?.length&&!e.hasClass("disabled")){let i=e.data("value");var t=this.$element.find(`option[value="${i}"]`);if(t.length){var s=e.hasClass("selected");if(s)t.prop("selected",!1),e.removeClass("selected").attr("aria-selected","false"),this.isMultiple?(e.find('input[type="checkbox"]').prop("checked",!1),this.selectedValues=this.selectedValues.filter((e=>e!==i))):this.selectedValues=null;else{if(this.isMultiple){if(this.options.maxSelection&&this.selectedValues.length>=this.options.maxSelection)return void this.$element.trigger("asSelect3:maxselection",{max:this.options.maxSelection});this.selectedValues.push(i)}else this.$optionsContainer.find(".as-select3-option").removeClass("selected").attr("aria-selected","false"),this.$element.find("option").prop("selected",!1),this.selectedValues=i;t.prop("selected",!0),e.addClass("selected").attr("aria-selected","true"),this.isMultiple?e.find('input[type="checkbox"]').prop("checked",!0):this.close()}s&&!this.isMultiple||(this.$trigger.removeClass("is-invalid"),this.updateSelection(),this.$element.trigger("change").trigger("asSelect3:change",{value:this.getValue()}))}}}search(t){if(this.options.matcher&&"function"==typeof this.options.matcher)this.customSearch(t);else{var s=this.$optionsContainer.find(".as-select3-option").not(".as-select3-no-results, .as-select3-loading");let i=!1;s.each(((s,a)=>{var l=(a=e(a)).data("text")||a.text();l=this.matchText(l,t);a.toggle(l),l&&(i=!0)})),this.toggleNoResults(!i&&0<t.length),this.focusIndex=-1}}customSearch(t){var s=this.$optionsContainer.find(".as-select3-option").not(".as-select3-no-results, .as-select3-loading");let i=!1;s.each(((s,a)=>{var l={id:(a=e(a)).data("value"),text:a.data("text")||a.text(),html:a.data("html")};l=this.options.matcher(t,l);a.toggle(l),l&&(i=!0)})),this.toggleNoResults(!i&&0<t.length),this.focusIndex=-1}matchText(e,t){return e.toLowerCase().includes(t.toLowerCase())}async remoteSearch(e){if(this.options.remote&&"function"==typeof this.options.remote){this.showLoading();try{var t=await this.options.remote(e);Array.isArray(t)?this.populateOptions(t):t?.options&&Array.isArray(t.options)?this.populateOptions(t.options):console.warn("Invalid remote response")}catch(e){console.error("Remote search error:",e),this.showNoResults(),this.$element.trigger("asSelect3:error",{error:e})}finally{this.hideLoading()}}}showLoading(){this.isLoading=!0,this.hideNoResults(),this.$optionsContainer.find(".as-select3-option").hide();var t=".as-select3-loading";this.$optionsContainer.find(t).length||this.$optionsContainer.append(e(`<div class="${t.substring(1)}">\n<div class="spinner-border spinner-border-sm me-2"></div>\n${this.options.loadingText}\n</div>`))}hideLoading(){this.isLoading=!1,this.$optionsContainer.find(".as-select3-loading").remove(),this.$optionsContainer.find(".as-select3-option").show()}toggleNoResults(t){var s=".as-select3-no-results",i=this.$optionsContainer.find(s);t&&!i.length?this.$optionsContainer.append(e(`<div class="${s.substring(1)}">\n<i class="${this.getSearchIcon()} me-2"></i>\n${this.options.noResultsText}\n</div>`)):!t&&i.length&&i.remove()}hideNoResults(){this.$optionsContainer.find(".as-select3-no-results").remove()}selectAll(){var e;this.isMultiple&&((e=this.$element.find("option:not(:disabled)")).prop("selected",!0),e.each(((e,t)=>{t=t.value,(t=this.$optionsContainer.find(`[data-value="${t}"]`)).length&&!t.hasClass("disabled")&&(t.addClass("selected").attr("aria-selected","true"),t.find('input[type="checkbox"]').prop("checked",!0))})),this.updateFromSelect(),this.$element.trigger("change").trigger("asSelect3:selectall"))}clearAll(){this.$element.find("option").prop("selected",!1),this.isMultiple?(this.selectedValues=[],this.$optionsContainer.find(".as-select3-option").removeClass("selected").attr("aria-selected","false"),this.$optionsContainer.find('input[type="checkbox"]').prop("checked",!1)):(this.selectedValues=null,this.$optionsContainer.find(".as-select3-option").removeClass("selected").attr("aria-selected","false")),this.updateSelection(),this.$element.trigger("change").trigger("asSelect3:clearall")}updateSelection(){var t,s,i,a,l,n,o;this.$selection.empty(),this.isMultiple?this.selectedValues.length?this.selectedValues.forEach((e=>{var t,s,i=this.$element.find(`option[value="${e}"]`),a=this.$optionsContainer.find(`[data-value="${e}"]`);i.length&&(t=i.text(),s=i.attr("data-html")||a.data("html"),i=i.attr("data-icon")||a.data("icon"),this.$selection.append(this.createTag(t,e,s,i)))})):this.$selection.append(this.$placeholder):this.selectedValues?(n=this.$element.find(`option[value="${this.selectedValues}"]`),o=this.$optionsContainer.find(`[data-value="${this.selectedValues}"]`),n.length&&(t=e('<div class="as-select3-single-container"></div>'),s=e('<span class="as-select3-single-value"></span>'),i=e(`<i class="${this.getCloseIcon()} as-select3-clear"></i>`).attr("data-value",this.selectedValues),a=n.text(),l=n.attr("data-html")||o.data("html"),n=n.attr("data-icon")||o.data("icon"),this.options.templateSelection&&"function"==typeof this.options.templateSelection?(o=this.options.templateSelection({id:this.selectedValues,text:a,html:l}))&&s.html(o):this.options.allowHtml&&l&&l!==a&&""!==l.trim()?s.html(this.options.escapeMarkup(l)):(n&&(o=e('<div class="as-select3-single-icon"></div>'),this.addIcon(o,n,"16px"),s.append(o)),s.append(e("<span></span>").text(a))),t.append(s,i),this.$selection.append(t))):this.$selection.append(this.$placeholder),this.updateOptionStates()}renderSingleValueWithIcon(t,s,i){var a,l=s.data("icon")||i.data("icon");l&&(a=e('<div class="as-select3-single-icon"></div>'),this.addIcon(a,l,"16px"),t.append(a)),t.append(e("<span></span>").text(s.data("text")||i.text()))}updateOptionStates(){if(this.isMultiple&&this.options.maxSelection){let t=this.selectedValues.length>=this.options.maxSelection;this.$optionsContainer.find(".as-select3-option").each(((s,i)=>{var a=(i=e(i)).hasClass("selected"),l=i.find('input[type="checkbox"]');t&&!a?(i.addClass("disabled").attr("aria-disabled","true"),l.prop("disabled",!0)):(i.removeClass("disabled").attr("aria-disabled","false"),l.prop("disabled",!1))}))}}createTag(t,s,i,a){var l=e('<span class="as-select3-tag"></span>').data("value",s);let n,o;if(this.options.templateSelection&&"function"==typeof this.options.templateSelection&&(s=this.options.templateSelection({id:s,text:t,html:i})))return n=e('<span class="as-select3-tag-content"></span>').html(s),o=e(`<i class="${this.getCloseIcon()} as-select3-tag-remove"></i>`),l.append(n,o),l;return n=this.options.allowHtml&&i&&i!==t&&""!==i.trim()?e('<span class="as-select3-tag-content"></span>').html(this.options.escapeMarkup(i)):(a&&(s=e('<div class="as-select3-tag-icon"></div>'),this.addIcon(s,a),l.append(s)),e('<span class="as-select3-tag-text"></span>').text(t).attr("title",t)),o=e(`<i class="${this.getCloseIcon()} as-select3-tag-remove"></i>`),l.append(n,o),l}removeTag(e){var t=this.$element.find(`option[value="${e}"]`),s=this.$optionsContainer.find(`[data-value="${e}"]`);t.length&&(t.prop("selected",!1),this.isMultiple?(s.find('input[type="checkbox"]').prop("checked",!1),this.selectedValues=this.selectedValues.filter((t=>t!==e))):this.selectedValues=null,s.removeClass("selected").attr("aria-selected","false"),this.updateSelection(),this.$element.trigger("change").trigger("asSelect3:tagremoved",{value:e}))}clearSingle(){this.selectedValues=null,this.$element.find("option").prop("selected",!1),this.$optionsContainer.find(".as-select3-option").removeClass("selected").attr("aria-selected","false"),this.updateSelection(),this.$element.trigger("change").trigger("asSelect3:cleared")}clearSelection(){this.isMultiple?this.clearAll():this.clearSingle()}updateFromSelect(){this.isMultiple?(this.selectedValues=[],this.$element.find("option:selected").each(((e,t)=>{this.selectedValues.push(t.value)}))):this.selectedValues=this.$element.find("option:selected").val()||null,this.updateSelection()}storeOriginalOptions(){this.originalOptions=this.$element.find("option").map((function(){return{value:this.value,text:this.text,selected:this.selected,html:e(this).data("html"),icon:e(this).data("icon")}})).get()}populateOptions(t=[]){this.$element.empty(),this.$optionsContainer.empty(),t.forEach(((t,s)=>{var i=e("<option></option>").val(t.value).text(t.text||t.label).prop("selected",!!t.selected);t.icon&&i.data("icon",t.icon),t.html&&i.data("html",t.html),t.disabled&&i.prop("disabled",!0),this.$element.append(i),this.$optionsContainer.append(this.createOptionElement({value:t.value,text:t.text||t.label,selected:!!t.selected,icon:t.icon,html:t.html,disabled:!!t.disabled},s))})),this.updateFromSelect()}addOption(t){var s=e("<option></option>").val(t.value).text(t.text||t.label).prop("selected",!!t.selected);return t.icon&&s.data("icon",t.icon),t.html&&s.data("html",t.html),t.disabled&&s.prop("disabled",!!t.disabled),this.$element.append(s),this.$optionsContainer.append(this.createOptionElement(t,this.$element.find("option").length-1)),t.selected&&this.updateFromSelect(),this.$element.trigger("asSelect3:optionadded",{option:t}),s}removeOption(e){this.$element.find(`option[value="${e}"]`).remove(),this.$optionsContainer.find(`[data-value="${e}"]`).remove(),this.isMultiple?this.selectedValues=this.selectedValues.filter((t=>t!==e)):this.selectedValues===e&&(this.selectedValues=null),this.updateSelection(),this.$element.trigger("asSelect3:optionremoved",{value:e})}clearOptions(){this.$element.empty(),this.$optionsContainer.empty(),this.selectedValues=this.isMultiple?[]:null,this.updateSelection(),this.$element.trigger("asSelect3:optionscleared")}refreshOptions(){this.$optionsContainer.empty(),this.$element.find("option").each(((e,t)=>{this.$optionsContainer.append(this.createOptionElement(t,e))})),this.updateFromSelect()}getValue(){return this.selectedValues}setValue(e){Array.isArray(e)&&this.isMultiple?(this.$element.find("option").prop("selected",!1),e.forEach((e=>{this.$element.find(`option[value="${e}"]`).prop("selected",!0)}))):Array.isArray(e)||this.isMultiple||(this.$element.find("option").prop("selected",!1),this.$element.find(`option[value="${e}"]`).prop("selected",!0)),this.updateFromSelect(),this.$element.trigger("change").trigger("asSelect3:valuechanged",{value:this.getValue()})}reset(){this.clearAll(),this.originalOptions.forEach((e=>{e.selected&&(this.isMultiple?this.selectedValues.push(e.value):this.selectedValues=e.value)})),this.updateFromSelect()}enable(){this.$container.removeClass("disabled"),this.$trigger.attr("tabindex","0"),this.$element.prop("disabled",!1)}disable(){this.close(),this.$container.addClass("disabled"),this.$trigger.attr("tabindex","-1"),this.$element.prop("disabled",!0)}destroy(){return this.close(),this.$trigger.off(),this.$container.off(),this.$optionsContainer.off(),e(document).off("click.asSelect3"),this.$element.off("invalid").closest("form").off("reset.asSelect3"),this.$element.removeClass("d-none").insertAfter(this.$container),this.$container.remove(),delete this.element._asSelect3,this.$element}}e.fn.asSelect3=function(e){return this.each((function(){this._asSelect3||(this._asSelect3=new t(this,e))}))},t.autoInit=function(s=".as-select3-container select"){return e(s).filter((function(){return!this._asSelect3})).map((function(){var e=new t(this);return this._asSelect3=e})).get()},window.AsSelect3=t})(jQuery);
//# sourceMappingURL=as-select3.min.js.map